{"version":3,"sources":["webpack:///public/js/app.6d4dc7163ad9c892defd.js","webpack:///./src/main.js","webpack:///./src/comet/idGenerator.js","webpack:///./src/util/Constants.js","webpack:///./src/comet/Message.js","webpack:///./src/util/functions.js","webpack:///./src/comet/comet.js","webpack:///./src/routers.js","webpack:///./src/store/index.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_webpackZepto","_webpackZepto2","_vue","_vue2","_vueRouter","_vueRouter2","_routers","_routers2","_index","_index2","use","config","debug","devtools","ajaxSettings","crossDomain","router","mode","routes","store","$mount","9","IdGenerator","prefix","this","lastId","Object","defineProperty","value","prototype","next","29","fileSeperate","serverHost","59","Message","action","content","Action","undefined","_stringify","_stringify2","toString","setAction","setContent","FILE_MODIFY","FILE_DELETE","FILE_ADD","FILE_RENAME","FILE_MOVE","63","_Constants","_Constants2","stringToTreeNode","str","file","mergeTreeNode","target","recurse","tree","breads","length","children","push","subTree","path","shift","every","item","name","isFolder","split","pop","registerLanguageComplete","language","completes","window","monaco","languages","registerCompletionItemProvider","provideCompletionItems","componentToCompleteItem","components","map","component","label","kind","CompletionItemKind","Keyword","insertText","131","registerSocket","fn","connection","comet","regisId","_idGenerator2","handlerPoll","send","msg","onOpen","params","e","console","log","onClose","onMessage","keys","_keys2","forEach","key","call","onError","WebSocket","onopen","onclose","onmessage","onerror","_keys","_idGenerator","132","Home","resolve","layout","routers","133","_vuex","_vuex2","_Message","_comet","_functions","_functions2","_lodash","Store","state","$eventBus","currentShowFile","currentSelectFile","openFiles","files","test","menuItems","items","commander","mutations","setCurrentShowFile","param","areadyOpen","index","id","set","setCurrentSelectFile","addFiles","savefiles","setComponents","actions","incrment","context","commit","crudmFile","fetchComponents","fetch","then","resp","json","getters"],"mappings":"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","file":"public/js/app.6d4dc7163ad9c892defd.js","sourcesContent":["webpackJsonp([4,2],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _webpackZepto = __webpack_require__(170);\n\t\n\tvar _webpackZepto2 = _interopRequireDefault(_webpackZepto);\n\t\n\tvar _vue = __webpack_require__(3);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _vueRouter = __webpack_require__(169);\n\t\n\tvar _vueRouter2 = _interopRequireDefault(_vueRouter);\n\t\n\tvar _routers = __webpack_require__(132);\n\t\n\tvar _routers2 = _interopRequireDefault(_routers);\n\t\n\tvar _index = __webpack_require__(133);\n\t\n\tvar _index2 = _interopRequireDefault(_index);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vueRouter2.default);\n\t_vue2.default.config.debug = true;\n\t_vue2.default.config.devtools = true;\n\t\n\t_webpackZepto2.default.ajaxSettings.crossDomain = true;\n\t\n\t// 实例化VueRouter\n\tvar router = new _vueRouter2.default({\n\t    mode: 'history',\n\t    routes: _routers2.default\n\t});\n\t\n\tnew _vue2.default({\n\t    router: router,\n\t    store: _index2.default\n\t}).$mount('#app');\n\n/***/ },\n\n/***/ 9:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tfunction IdGenerator(prefix) {\n\t    this.prefix = prefix;\n\t    this.lastId = 0;\n\t}\n\t\n\tIdGenerator.prototype.next = function () {\n\t    return this.prefix + ++this.lastId;\n\t};\n\t\n\texports.default = new IdGenerator('#id-');\n\n/***/ },\n\n/***/ 29:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = {\n\t    'fileSeperate': '/',\n\t    'serverHost': 'http://10.10.20.126:8888'\n\t};\n\n/***/ },\n\n/***/ 59:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Action = exports.Message = undefined;\n\t\n\tvar _stringify = __webpack_require__(121);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Message(action, content) {\n\t    this.action = action;\n\t    this.content = content;\n\t}\n\t\n\tMessage.prototype.toString = function () {\n\t    return (0, _stringify2.default)({ action: this.action, content: this.content });\n\t};\n\t\n\tMessage.prototype.setAction = function (action) {\n\t    this.action = action;\n\t};\n\t\n\tMessage.prototype.setContent = function (content) {\n\t    this.content = content;\n\t};\n\t\n\tvar Action = {\n\t    FILE_MODIFY: 0,\n\t    FILE_DELETE: 1,\n\t    FILE_ADD: 2,\n\t    FILE_RENAME: 3,\n\t    FILE_MOVE: 4\n\t};\n\t\n\texports.Message = Message;\n\texports.Action = Action;\n\n/***/ },\n\n/***/ 63:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _Constants = __webpack_require__(29);\n\t\n\tvar _Constants2 = _interopRequireDefault(_Constants);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t    //  a/b/c/d => {a:{b:{c:{d:obj}}}};\n\t    stringToTreeNode: function stringToTreeNode(str, file) {\n\t        // var breads = str.split(Constants.fileSeperate);\n\t        // var key = breads.pop();\n\t\n\t        // function recurse(breads, content){\n\t        //     var tmp = {};\n\t        //     if(breads.length <= 0){\n\t        //         return content;\n\t        //     }\n\t        //     var key = breads.pop();\n\t\n\t        //     tmp.name = key;\n\t        //     tmp.isFolder = true;\n\t        //     tmp.children = [];\n\t        //     tmp.children.push(content)\n\t\n\t        //     return recurse(breads, tmp);\n\t        // }\n\t        // return recurse(breads, file)\n\t    },\n\t    mergeTreeNode: function mergeTreeNode(target, file) {\n\t        var breads = file.path.split(_Constants2.default.fileSeperate);\n\t        breads.pop();\n\t        breads.shift();\n\t\n\t        function recurse(tree, breads, file) {\n\t            if (breads.length == 0) {\n\t                tree.children.push(file);\n\t                return;\n\t            }\n\t            var path = breads.shift();\n\t            var subTree;\n\t            tree.children.every(function (item) {\n\t                if (item.name == path) {\n\t                    subTree = item;\n\t                    return false;\n\t                }\n\t                return true;\n\t            });\n\t            if (!subTree) {\n\t                subTree = {\n\t                    name: path,\n\t                    isFolder: true,\n\t                    children: []\n\t                };\n\t                tree.children.push(subTree);\n\t            }\n\t            recurse(subTree, breads, file);\n\t        }\n\t        recurse(target, breads, file);\n\t        return target;\n\t    },\n\t    registerLanguageComplete: function registerLanguageComplete(language, completes) {\n\t        window.monaco && window.monaco.languages.registerCompletionItemProvider(language, {\n\t            provideCompletionItems: function provideCompletionItems() {\n\t                return completes;\n\t            }\n\t        });\n\t    },\n\t    componentToCompleteItem: function componentToCompleteItem(components) {\n\t        debugger;\n\t        return window.monaco ? components.map(function (component) {\n\t            return {\n\t                label: component,\n\t                kind: window.monaco.languages.CompletionItemKind.Keyword,\n\t                insertText: '<' + component + '></' + component + '>'\n\t            };\n\t        }) : components;\n\t    }\n\t};\n\n/***/ },\n\n/***/ 131:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.send = exports.registerSocket = undefined;\n\t\n\tvar _keys = __webpack_require__(65);\n\t\n\tvar _keys2 = _interopRequireDefault(_keys);\n\t\n\tvar _stringify = __webpack_require__(121);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _idGenerator = __webpack_require__(9);\n\t\n\tvar _idGenerator2 = _interopRequireDefault(_idGenerator);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar handlerPoll = {};\n\tvar serverHost = 'ws://localhost:8888';\n\t\n\tfunction registerSocket(fn) {\n\t    if (!window.connection) {\n\t        comet();\n\t    }\n\t    if (fn && typeof fn === 'function') {\n\t        var regisId = _idGenerator2.default.next();\n\t        handlerPoll[regisId] = fn;\n\t        return regisId;\n\t    }\n\t    return null;\n\t}\n\t\n\tfunction send(msg, fn) {\n\t    if (!window.connection) {\n\t        comet({ onOpen: function onOpen() {\n\t                window.connection.send((0, _stringify2.default)(msg));\n\t                fn && fn();\n\t            } });\n\t    } else {\n\t        window.connection.send((0, _stringify2.default)(msg));\n\t        fn && fn();\n\t    }\n\t}\n\t\n\tfunction comet(params) {\n\t    if (window.connection) {\n\t        return;\n\t    }\n\t    var WebSocket = window.WebSocket;\n\t    var connection = window.connection = new WebSocket(serverHost);\n\t\n\t    if (connection) {\n\t        connection.onopen = onOpen;\n\t        connection.onclose = onClose;\n\t        connection.onmessage = onMessage;\n\t        connection.onerror = onError;\n\t    }\n\t\n\t    function onOpen(e) {\n\t        params.onOpen && params.onOpen(e);\n\t        console.log('socket connect', e);\n\t    }\n\t    function onClose(e) {\n\t        console.log('socket close', e);\n\t    }\n\t    function onMessage(e) {\n\t        console.log(e);\n\t        var keys = (0, _keys2.default)(handlerPoll);\n\t\n\t        keys.forEach(function (key) {\n\t            try {\n\t                handlerPoll[key].call(null, e);\n\t            } catch (e) {\n\t                console.log('id :  %s error, handler : ', key, handlerPoll[key]);\n\t            }\n\t        });\n\t    }\n\t    function onError(e) {\n\t        console.log('socket error', e);\n\t    }\n\t}\n\t\n\texports.registerSocket = registerSocket;\n\texports.send = send;\n\n/***/ },\n\n/***/ 132:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar Home = function Home(resolve) {\n\t    __webpack_require__.e/* nsure */(0, function () {\n\t        resolve(__webpack_require__(125));\n\t    });\n\t};\n\t\n\tvar layout = function layout(resolve) {\n\t    __webpack_require__.e/* nsure */(1, function () {\n\t        resolve(__webpack_require__(126));\n\t    });\n\t};\n\t\n\tvar routers = [{\n\t    path: '/',\n\t    name: 'home',\n\t    component: Home\n\t}, {\n\t    path: '/layout',\n\t    name: 'layout',\n\t    component: layout\n\t}];\n\t\n\texports.default = routers;\n\n/***/ },\n\n/***/ 133:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _vue = __webpack_require__(3);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _vuex = __webpack_require__(28);\n\t\n\tvar _vuex2 = _interopRequireDefault(_vuex);\n\t\n\tvar _Message = __webpack_require__(59);\n\t\n\tvar _comet = __webpack_require__(131);\n\t\n\tvar _Constants = __webpack_require__(29);\n\t\n\tvar _Constants2 = _interopRequireDefault(_Constants);\n\t\n\tvar _functions = __webpack_require__(63);\n\t\n\tvar _functions2 = _interopRequireDefault(_functions);\n\t\n\tvar _lodash = __webpack_require__(162);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vuex2.default);\n\texports.default = new _vuex2.default.Store({\n\t    state: {\n\t        //get by store.state.x\n\t        //mapState\n\t        $eventBus: new _vue2.default(),\n\t        currentShowFile: {},\n\t        currentSelectFile: {},\n\t        openFiles: [],\n\t        files: { 'test': {\n\t                name: 'test',\n\t                isFolder: true,\n\t                children: [{\n\t                    name: 'test1',\n\t                    isFolder: true,\n\t                    children: [{\n\t                        name: 'test1.js',\n\t                        isFolder: false,\n\t                        content: \"content1\"\n\t                    }]\n\t                }, {\n\t                    name: 'test2',\n\t                    isFolder: true,\n\t                    children: [{\n\t                        name: 'test2.j',\n\t                        isFolder: false,\n\t                        content: \"content2\"\n\t                    }]\n\t                }, {\n\t                    name: 'test3',\n\t                    isFolder: true,\n\t                    children: [{\n\t                        name: 'test3.js',\n\t                        isFolder: false,\n\t                        content: \"content3\"\n\t                    }]\n\t                }]\n\t            } },\n\t        menuItems: [{\n\t            name: 'File',\n\t            items: [{\n\t                name: 'New File',\n\t                commander: 'createFile'\n\t            }, {\n\t                name: 'New Folder',\n\t                commander: 'createFile'\n\t            }, {\n\t                name: 'New Component',\n\t                commander: 'createFile'\n\t            }, {\n\t                name: 'Save As',\n\t                commander: 'createFile'\n\t            }]\n\t        }, {\n\t            name: 'Edit'\n\t        }],\n\t        components: []\n\t    },\n\t    mutations: {\n\t        //call by store.commit('increment', param);\n\t        //or call by store.commit({\n\t        //      type:'increment',\n\t        //      ...\n\t        //})\n\t        //mutations must be synchronous\n\t        //map to component mapMutations\n\t        setCurrentShowFile: function setCurrentShowFile(state, param) {\n\t            state.currentShowFile = param.currentShowFile;\n\t            var areadyOpen = false;\n\t            state.openFiles.every(function (file, index) {\n\t                if (file.id === param.currentShowFile.id) {\n\t                    state.openFiles[index] = param.currentShowFile;\n\t                    _vue2.default.set(state.openFiles, state.openFiles);\n\t                    areadyOpen = true;\n\t                    return false;\n\t                }\n\t                return true;\n\t            });\n\t            !areadyOpen && state.openFiles.push(param.currentShowFile);\n\t        },\n\t        setCurrentSelectFile: function setCurrentSelectFile(state, param) {\n\t            state.currentSelectFile = param.currentSelectFile;\n\t        },\n\t        addFiles: function addFiles(state, param) {\n\t            var savefiles = param.files;\n\t            savefiles.forEach(function (file) {\n\t                var path = file.path;\n\t                var tree = state.files[path.split(_Constants2.default.fileSeperate).shift()];\n\t                _functions2.default.mergeTreeNode(tree, file);\n\t            });\n\t        },\n\t        setComponents: function setComponents(state, param) {\n\t            state.components = param.components;\n\t        }\n\t    },\n\t    actions: {\n\t        //call action by store.dispatch('increment')\n\t        //like actions but some different\n\t        // commit by mutation\n\t        //it is asynchronous\n\t        incrment: function incrment(context) {\n\t            //can do some async operations\n\t            context.commit('increment');\n\t        },\n\t\n\t\n\t        //增删查改移动文件\n\t        crudmFile: function crudmFile(context, param) {\n\t            switch (param.action) {\n\t                case _Message.Action.FILE_ADD:\n\t                    (0, _comet.send)(param.content, function () {\n\t                        context.commit('setCurrentShowFile', { currentShowFile: param.content });\n\t                        context.commit('addFiles', { files: [param.content] });\n\t                    });\n\t                case _Message.Action.FILE_DELETE:\n\t                case _Message.Action.FILE_MODIFY:\n\t                case _Message.Action.FILE_RENAME:\n\t                case _Message.Action.FILE_MOVE:\n\t                    console.log(param.content);\n\t            }\n\t        },\n\t        fetchComponents: function fetchComponents(context) {\n\t            fetch(_Constants2.default.serverHost + '/components/list').then(function (resp) {\n\t                return resp.json();\n\t            }).then(function (json) {\n\t                context.commit('setComponents', { components: json });\n\t            });\n\t        }\n\t    },\n\t    getters: {\n\t        //get by store.getters.x\n\t        //mapGetters\n\t    }\n\t});\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// public/js/app.6d4dc7163ad9c892defd.js","\r\nimport $ from 'webpack-zepto';\r\nimport Vue from 'vue';\r\nimport VueRouter from 'vue-router';\r\nimport routes from './routers';\r\nimport store from './store/index'\r\n\r\nVue.use(VueRouter);\r\nVue.config.debug = true;\r\nVue.config.devtools = true;\r\n\r\n$.ajaxSettings.crossDomain = true;\r\n\r\n// 实例化VueRouter\r\nconst router = new VueRouter({\r\n    mode: 'history',\r\n    routes\r\n});\r\n\r\n\r\n\r\nnew Vue({\r\n    router,\r\n    store\r\n}).$mount('#app');\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function IdGenerator(prefix){\r\n    this.prefix = prefix;\r\n    this.lastId = 0;\r\n}\r\n\r\nIdGenerator.prototype.next = function(){\r\n    return this.prefix + (++this.lastId);\r\n}\r\n\r\nexport default new IdGenerator('#id-');\n\n\n// WEBPACK FOOTER //\n// ./src/comet/idGenerator.js","export default {\r\n    'fileSeperate' : '/',\r\n    'serverHost' : 'http://10.10.20.126:8888'\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/Constants.js","function Message(action, content){\r\n    this.action = action;\r\n    this.content = content;\r\n}\r\n\r\nMessage.prototype.toString = function(){\r\n    return JSON.stringify({action : this.action, content : this.content});\r\n}\r\n\r\nMessage.prototype.setAction = function(action){\r\n    this.action = action;\r\n}\r\n\r\nMessage.prototype.setContent = function(content){\r\n    this.content = content;\r\n}\r\n\r\nvar Action = {\r\n    FILE_MODIFY : 0,\r\n    FILE_DELETE : 1,\r\n    FILE_ADD : 2,\r\n    FILE_RENAME : 3,\r\n    FILE_MOVE : 4\r\n}\r\n\r\nexport {\r\n    Message,\r\n    Action\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/comet/Message.js","import Constants from './Constants'\r\n\r\nexport default {\r\n    //  a/b/c/d => {a:{b:{c:{d:obj}}}};\r\n    stringToTreeNode(str, file){\r\n        // var breads = str.split(Constants.fileSeperate);\r\n        // var key = breads.pop();\r\n \r\n        // function recurse(breads, content){\r\n        //     var tmp = {};\r\n        //     if(breads.length <= 0){\r\n        //         return content;\r\n        //     }\r\n        //     var key = breads.pop();\r\n\r\n        //     tmp.name = key;\r\n        //     tmp.isFolder = true;\r\n        //     tmp.children = [];\r\n        //     tmp.children.push(content)\r\n\r\n        //     return recurse(breads, tmp);\r\n        // }\r\n        // return recurse(breads, file)\r\n    },\r\n\r\n    mergeTreeNode(target, file){\r\n        var breads = file.path.split(Constants.fileSeperate);\r\n        breads.pop();\r\n        breads.shift();\r\n\r\n        function recurse(tree, breads, file){\r\n            if(breads.length == 0){\r\n                tree.children.push(file);\r\n                return;\r\n            }\r\n            var path = breads.shift()\r\n            var subTree;\r\n            tree.children.every(function(item){\r\n                if(item.name == path){\r\n                    subTree = item;\r\n                    return false;\r\n                }\r\n                return true;\r\n            })\r\n            if(!subTree){\r\n                subTree = {\r\n                    name : path,\r\n                    isFolder : true,\r\n                    children : []\r\n                }\r\n                tree.children.push(subTree);\r\n            }\r\n            recurse(subTree, breads, file);\r\n        }\r\n        recurse(target, breads, file);\r\n        return target;\r\n    },\r\n\r\n    registerLanguageComplete(language, completes){\r\n        window.monaco && window.monaco.languages.registerCompletionItemProvider(language, {\r\n            provideCompletionItems : () => {\r\n                return completes;\r\n            }\r\n        })\r\n    },\r\n\r\n    componentToCompleteItem(components){\r\n        debugger;\r\n        return window.monaco ? components.map(component => {\r\n            return {\r\n                label : component,\r\n                kind : window.monaco.languages.CompletionItemKind.Keyword,\r\n                insertText : '<' + component + '></' + component + '>'\r\n            }\r\n        }) : components;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/functions.js","import idGenerator from './idGenerator'\r\n\r\nvar handlerPoll = {};\r\nvar serverHost = 'ws://localhost:8888';\r\n\r\nfunction registerSocket(fn){\r\n    if(!window.connection){\r\n        comet();\r\n    }\r\n    if(fn && typeof fn === 'function'){\r\n        var regisId =  idGenerator.next();\r\n        handlerPoll[regisId] = fn;\r\n        return regisId;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction send(msg, fn){\r\n    if(!window.connection){\r\n        comet({onOpen : function(){\r\n            window.connection.send(JSON.stringify(msg));\r\n            fn && fn();\r\n        }});\r\n    }else{\r\n         window.connection.send(JSON.stringify(msg));\r\n         fn && fn();\r\n    }\r\n}\r\n\r\n\r\nfunction comet(params){\r\n    if(window.connection){\r\n        return;\r\n    }\r\n    var WebSocket = window.WebSocket;\r\n    var connection = window.connection = new WebSocket(serverHost);\r\n\r\n    if(connection){\r\n        connection.onopen = onOpen;\r\n        connection.onclose = onClose;\r\n        connection.onmessage = onMessage;\r\n        connection.onerror = onError;\r\n    }\r\n    \r\n    function onOpen(e){\r\n        params.onOpen && params.onOpen(e);\r\n        console.log('socket connect', e);\r\n    }\r\n    function onClose(e){\r\n        console.log('socket close', e)\r\n    }\r\n    function onMessage(e){\r\n        console.log(e);\r\n        var keys = Object.keys(handlerPoll);\r\n\r\n        keys.forEach(key => {\r\n            try{\r\n                handlerPoll[key].call(null, e)\r\n            }catch(e){\r\n                console.log('id :  %s error, handler : ', key,  handlerPoll[key]);\r\n            }\r\n        })\r\n    }\r\n    function onError(e){\r\n        console.log('socket error', e);\r\n    }\r\n\r\n}\r\n\r\nexport {registerSocket, send}\n\n\n// WEBPACK FOOTER //\n// ./src/comet/comet.js","const Home = resolve => {\r\n    require.ensure(['./views/index.vue'], () => {\r\n        resolve(require('./views/index.vue'));\r\n    });\r\n};\r\n\r\nconst layout = resolve => {\r\n    require.ensure(['./views/layout.vue'], () => {\r\n        resolve(require('./views/layout.vue'));\r\n    });\r\n};\r\n\r\nconst routers = [{\r\n    path: '/',\r\n    name: 'home',\r\n    component: Home\r\n}, {\r\n    path : '/layout',\r\n    name : 'layout',\r\n    component : layout\r\n}];\r\n\r\nexport default routers;\n\n\n// WEBPACK FOOTER //\n// ./src/routers.js","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport {Action} from '../comet/Message'\r\nimport {send} from '../comet/comet'\r\nimport Constants from '../util/Constants'\r\nimport functions from '../util/functions'\r\nimport assign from 'lodash.assign'\r\n\r\nVue.use(Vuex);\r\nexport default new Vuex.Store({\r\n    state : {  \r\n        //get by store.state.x\r\n        //mapState\r\n        $eventBus : new Vue(),\r\n        currentShowFile :{},\r\n        currentSelectFile : {},\r\n        openFiles : [],\r\n        files : {'test': {\r\n            name : 'test',\r\n            isFolder : true,\r\n            children : [\r\n                {\r\n                    name : 'test1',\r\n                    isFolder : true,\r\n                    children : [\r\n                        {\r\n                            name : 'test1.js',\r\n                            isFolder : false,\r\n                            content : \"content1\"\r\n                        }\r\n                    ]\r\n                },{\r\n                    name : 'test2',\r\n                    isFolder : true,\r\n                    children : [\r\n                        {\r\n                            name : 'test2.j',\r\n                            isFolder : false,\r\n                            content : \"content2\"\r\n                        }\r\n                    ]\r\n                },{\r\n                    name : 'test3',\r\n                    isFolder : true,\r\n                    children : [\r\n                        {\r\n                            name : 'test3.js',\r\n                            isFolder : false,\r\n                            content : \"content3\"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }},\r\n        menuItems : [{\r\n            name : 'File',\r\n            items : [\r\n                {\r\n                    name : 'New File',\r\n                    commander : 'createFile'\r\n                }, {\r\n                    name : 'New Folder',\r\n                    commander : 'createFile'\r\n                },{\r\n                    name : 'New Component',\r\n                    commander : 'createFile'\r\n                },{\r\n                    name : 'Save As',\r\n                    commander : 'createFile'\r\n                }\r\n            ]\r\n        },{\r\n            name : 'Edit'\r\n        }],\r\n        components : []\r\n    },\r\n    mutations : {\r\n        //call by store.commit('increment', param);\r\n        //or call by store.commit({\r\n        //      type:'increment',\r\n        //      ...\r\n        //})\r\n        //mutations must be synchronous\r\n        //map to component mapMutations\r\n        setCurrentShowFile(state, param){\r\n            state.currentShowFile = param.currentShowFile;\r\n            var areadyOpen = false;\r\n            state.openFiles.every(function(file, index){\r\n                if(file.id === param.currentShowFile.id){\r\n                    state.openFiles[index] = param.currentShowFile;\r\n                    Vue.set(state.openFiles, state.openFiles);\r\n                    areadyOpen = true;\r\n                    return false;\r\n                }\r\n                return true;\r\n            })\r\n            !areadyOpen && state.openFiles.push(param.currentShowFile);\r\n        },\r\n\r\n        setCurrentSelectFile(state, param){\r\n            state.currentSelectFile = param.currentSelectFile;\r\n        },\r\n        addFiles(state, param){\r\n            var savefiles = param.files;\r\n            savefiles.forEach(file => {\r\n                var path = file.path;\r\n                var tree = state.files[path.split(Constants.fileSeperate).shift()];\r\n                functions.mergeTreeNode(tree, file);\r\n            })\r\n        },\r\n\r\n        setComponents(state, param){\r\n            state.components = param.components;\r\n        }\r\n    },\r\n    actions : {\r\n        //call action by store.dispatch('increment')\r\n        //like actions but some different\r\n        // commit by mutation\r\n        //it is asynchronous\r\n        incrment(context){\r\n            //can do some async operations\r\n            context.commit('increment')\r\n        },\r\n\r\n        //增删查改移动文件\r\n        crudmFile(context, param){\r\n            switch(param.action){\r\n                case Action.FILE_ADD:\r\n                    send(param.content,() => {\r\n                         context.commit('setCurrentShowFile',  {currentShowFile : param.content})\r\n                         context.commit('addFiles',  {files : [param.content]})\r\n                    });\r\n                case Action.FILE_DELETE:\r\n                case Action.FILE_MODIFY:\r\n                case Action.FILE_RENAME:\r\n                case Action.FILE_MOVE:\r\n                    console.log(param.content);\r\n            }\r\n        },\r\n\r\n        fetchComponents(context){\r\n            fetch(Constants.serverHost + '/components/list').then(resp =>resp.json()).then(json => {\r\n                context.commit('setComponents', {components : json});\r\n            })\r\n        }\r\n    },\r\n    getters : {\r\n        //get by store.getters.x\r\n        //mapGetters\r\n    }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js"],"sourceRoot":""}